# Итоговый проект «Система управления личными финансами»

### Что нужно делать

Ваша задача — разработать backend-приложение для управления личными финансами. Проект позволит пользователям добавлять доходы и расходы, устанавливать бюджеты на категории и получать статистику по своим финансам.

Основной задачей является создание функционального приложения, используя знания, полученные в ходе изучения курса. Это практическое задание поможет вам освоить принципы работы с данными, объектно-ориентированное программирование и разработку приложений.

#### Основные задачи:

Для успешного выполнения проекта ваше backend-приложение для управления личными финансами должно соответствовать следующим требованиям:

* Хранение данных
  
  Все данные должны храниться в памяти приложения.
* Авторизация пользователей
  
  Реализовать функциональность для авторизации пользователей по логину и паролю. Приложение должно поддерживать несколько пользователей.
* Функционал управления финансами
  
  Разработать логику для добавления доходов и расходов. Пользователь должен иметь возможность создавать категории для планирования бюджета.
  
  Предусмотреть функциональность для установления бюджета на каждую категорию расходов.
* Работа с кошельком пользователя:

  Привязать кошелёк к авторизованному пользователю. Кошелёк должен хранить информацию о текущих финансах и всех операциях (доходах и расходах).

  Сохранять установленный бюджет по категориям.
* Вывод информации:

  Реализовать возможность отображения общей суммы доходов и расходов, а также данных по каждой категории.

  Выводить информацию о текущем состоянии бюджета для каждой категории, а также оставшийся лимит.

  Поддерживать вывод информации в терминал или в файл.
* Подсчет расходов и доходов:

  Разработать методы, подсчитывающие общие расходы и доходы, а также по категориям.

  Поддержать возможность подсчета по нескольким выбранным категориям. Если категория не найдена, уведомлять пользователя.
* Проверка вводимых данных:

  Валидация пользовательского ввода и уведомление о некорректных данных.
* Оповещения:

  Оповещать пользователя, если превышен лимит бюджета по категории или расходы превысили доходы.
* Сохранение данных:

  При выходе из приложения сохранять данные кошелька пользователя в файл.

  При авторизации загружать данные кошелька из файла.
* Чтение команд пользователя в цикле:

  Реализовать цикл для постоянного чтения команд пользователя. Поддержать возможность выхода из приложения.
* Дополнительное задание (не оценивается):

  Реализовать возможность переводов между кошельками пользователей. При переводе фиксировать расход у отправителя и доход у получателя, идентифицируя их по логину.

### Описание реализации

Приложение состоит из трех основных логических частей:
* Хранилище данных - простая реализация хранения данных в памяти на основе Map
* Командный процессор - реализует логику главного меню и взаимодействия пользователя с сервисом. 
  
  Главное меню содержит:
    * `user` - команда управления пользователями
      * `add` - подкоманда регистрации нового пользователя, например `user add Viktor` - будет запрошен пароль нового пользователя и зарегистрирован пользователь с логином Viktor
      * `login` - подкоманда входа пользователя в систему по логину и паролю, например `user login Viktor` - будет запрошен пароль нового пользователя и вход в сессию пользователя Viktor
      * `list` - подкоманда для отображения списка пользователей, например `user list` - будет показан список пользователей
    * `exit` - пункт для выхода из приложения, например `exit`

      Поддерживает аргументы:
      * `-F`, `--force` - немедленный выход из приложения, если указать этот флаг, будет выполнен выход из приложения, а не выход из сессии пользователя
    * `help` - пункт для вызова справки `help`

  Для авторизованного пользователя доступны следующие команды:
  * `wallet` - команда управления кошельком
    * `push` - подкоманда добавления денег в кошелек, например `wallet push 500` - будет выполнена операция добавления 500 денег в кошелек
    * `pull` - подкоманда взятия денег из кошелька, например `wallet pull 500` - будет выполнена операция изъятия 500 денег из кошелька
    
      Поддерживает аргументы:
      * `-C`, `--category` - интерактивный, если его указать при выполнении операции будет запрошена категория 
    * `send` - подкоманда перевода денег другому пользователю, например `wallet send Viktor 500` - пользователю Viktor будет отправлен перевод 500
    * `squash` - подкоманда очистки истории, все операции сворачиваются в одну, например `wallet squash` - все операции будут свернуты в одну, история операций будет утеряна
    * `info` - подкоманда отображения отчета по кошельку, например `wallet info` - будет выведен отчет по кошельку
    
      Поддерживает аргументы:
      * `-F`, `--full` - для вывода подробного отчета (со списком всех операций)
      * `-C`, `--category` - интерактивный и позволяет ввести список категорий, разделенных символом ";", по которым и будет выведен отчет
  * `category` - команда управления категориями расходов
    * `add` - подкоманда добавления категории, например `category add на проезд` - будет добавлена новая категория с названием "на проезд"
    
      Поддерживает аргументы:
      * `-B`, `--budget` - задает бюджет по категории 
    * `edit` - подкоманда редактирования категории, например `category edit на проезд` - будет запрошено новое название для категории "на проезд"
      
      Поддерживает аргументы:
      * `-B`, `--budget` - задает бюджет по категории
      * `-R`, `--rename` - интерактивный и запрашивает новое имя категории
      * `-D`, `--drop` - интерактивный и сбрасывает лимит категории
    * `remove` - подкоманда удаления категории, например `category remove на проезд` - будет удалена категория с названием "на проезд", если эта категория не содержит операций
    
      Поддерживает аргументы:
      * `-F`, `--force` - позволяет удалить категорию, если она содержит операции - просто обнуляет все ссылки в операциях на удаляемую категорию
    * `list` - подкоманда отображения списка категорий
  * `exit` - пункт для выхода из приложения, например `exit`

    Поддерживает аргументы:
    * `-F`, `--force` - немедленный выход из приложения, если указать этот флаг, будет выполнен выход из приложения, а не выход из сессии пользователя
  * `help` - пункт для вызова справки `help`

#### Основные классы:

* FinancialManagement - точка входа в приложение, тут создаются все необходимые объекты: выполняется чтение данных их файла, запускается командный процессор и выполняется сохранение данных файл в конце работы приложения
  
  Запускается как команда CLI, и имплементирует интерфейс Callable, чтобы реализовать ожидание завершения выполнения потока командного процессора.
  Поддерживает аргументы:
  * `-F`, `--file` - файл хранения данных, в этом фале будут сохранены пользователи и ссылки для последующего чтения
* Printer - выполняет функцию печати
* CommandProcessor - командный процессор, организует взаимодействие с пользователем через консоль
* DataSource - интерфейс хранилища данных
* UserDataSource - хранилище пользователей
* UserEntityMapper - маппер пользователей, нужен для десериализации прочитанных данных из файла и сериализации данных для записи в файл
* OperationDataSource - хранилище операций
* OperationEntityMapper - маппер операций, нужен для десериализации прочитанных данных из файла и сериализации данных для записи в файл
* CategoryDataSource - хранилище категорий
* CategoryEntityMapper - маппер категорий, нужен для десериализации прочитанных данных из файла и сериализации данных для записи в файл
* DataConnectorImpl - класс с логикой чтения данных из файла и сохранения данных в файл
* DataSourceDictionaryImpl - библиотека данных, содержит ассоциативную коллекцию хранилищ данных, по названию класса объекта можно получить хранилище этих объектов 
* User - класс пользователя
* Operation - класс операции
* Category - класс категории
* Context - класс контекста выполнения команд
* AbstractCommand - абстрактный класс команды
* Command - перечисление верхнеуровневых команд
* CategoryGroup - класс, реализующий корневую команду управления категориями
* CategoryAdd - класс, реализующий команду добавления новой категории
* CategoryEdit - класс, реализующий команду редактирования категории
* CategoryRemove - класс, реализующий команду удаления категории
* UserGroup - класс, реализующий корневую команду управления пользователями
* UserAdd - класс, реализующий команду регистрации нового пользователя
* UserLogin - класс, реализующий команду авторизации пользователя
* WalletGroup - класс, реализующий корневую команду управления кошельком
* WalletPush - класс, реализующий команду добавления денег в кошелек
* WalletPull - класс, реализующий команду изымания денег из кошелька
* WalletSend - класс, реализующий команду перевода денег другому пользователю
* WalletSquash - класс, реализующий команду сворачивания всех операций в одну
* WalletInfo - класс, реализующий команду вывода отчета по кошельку
* Exit - класс, реализующий команду выхода из сессии пользователя/приложения
* Help - класс, реализующий команду отображения справки
* FileConverter - конвертер, выполняет преобразование полного пути к файлу в объект файла
* CategoriesConverter - конвертер списка категорий введенных вручную и разделенных символом ";" в коллекцию названий категорий